# general variables
common:
    master_node: '{{ groups.nodes[0] }}'

# !ВНИМАНИЕ! имена и количество узлов в переменных nodes_ip, nodes_ip_ipmi, pdu_connections
# должны совпадать cо списком узлов в файле stage в разделе [nodes]
nodes_ip: { hacnode1: 20, hacnode2: 21, hacnode3: 22 }
nodes_ip_ipmi: { hacnode1: 7, hacnode2: 8, hacnode3: 9 }

# Значения в словаре - это номер розетки на pdu, к которой подключен сервер,
# если pdu дублируются, то узлы должны быть подключены семмитрично, т.е. hacnode1 к 1 розетке на обоих pdu.
pdu_connections: { hacnode1: 1, hacnode2: 2, hacnode3: 3 }

repository:
    # Адрес репозитория с дистрибутивом Астры версии 1.3
    os: http://172.16.0.77/astra

    # Адреса репозиториев с пакетами для ПК КВГ
    hac: http://172.16.0.77/hac

hac_cntrl:
    ip: 10.10.50.99
    name: cluster

# Настройки Astra Linux Directory
ald:
    # Узел сервера
    master_ald_srv: '{{ groups.virtual_server[0] }}'
    
    # Должен совпадать с реально установленным ip-адресом ВМ с ald сервером
    ip_master_ald: 10.10.50.80

    # Домен
    domain: hac

    # Расположение информации в LDAP.
    ldap_domain: dc=${ald.domain}

    # Домен в записи Kerberos в верхнем регистре.
    krb_domain: ${ald.domain.upper()}

    # Список групп, первой в списке должна всегда быть группа для пользователей с полномочиями администраторов КВГ
    groups: [administrators, users]

    # Имя администратора
    kvg_admin_name: kvg_admin

    # Сервисы
    services_list: [krb5-kdc, krb5-admin-server, slapd, nslcd, nscd, aldd, aldcd]

# точка монтирования glusterfs
gluster:
    mount_point: '/var/glusterfs'
    placedir: '/srv'
    volume: 'vm_storage_volume'
dirs:
    vm_images: '{{ gluster.mount_point }}/vm_images_and_config'
    ald_env_users: '{{ gluster.mount_point }}'

