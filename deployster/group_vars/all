# general variables

common:
    master_node: '{{ groups.nodes[0] }}'

# !ВНИМАНИЕ! имена и количество узлов в переменных nodes_ip, nodes_ip_ipmi, pdu_connections
# должны совпадать cо списком узлов в файле stage в разделе [nodes]
nodes_ip: { hacnode1: 49, hacnode2: 50, hacnode3: 51 }
nodes_ip_ipmi: { hacnode1: 40, hacnode2: 41, hacnode3: 42 }

# значения в словаре - это номер розетки на pdu, к которой подключен сервер,
# если pdu дублируются, то узлы должны быть подключены семмитрично, т.е. hacnode1 к 1 розетке на обоих pdu
pdu_connections: { hacnode1: 1, hacnode2: 2, hacnode3: 3 }

repository:
    # Адрес репозитория с дистрибутивом Астры версии 1.3
    os: http://packages.npdb/se13

    # Адреса репозиториев с пакетами для ПК КВГ
    hac_common: http://packages.npdb/virt/se13/common
    hac: http://packages.npdb/virt/se13/vplatform
    # todo only for havedeg!!! add this package to clustert rep!
    globula: http://packages.npdb/cloud/se13/globula

hac_cntrl:
    # todo адрес должен быть из сети public!!
    ip: 192.168.50.55
    name: cluster

# Настройки Astra Linux Directory
ald:
    # Узел сервера
#    master_ald_srv: '{{ common.master_node }}'
    master_ald_srv: '{{ groups.virtual_server[0] }}'

    # Домен
    domain: npdb

    # Расположение информации в LDAP.
    ldap_domain: dc=${ald.domain}

    # Домен в записи Kerberos в верхнем регистре.
    krb_domain: ${ald.domain.upper()}

    # Список групп, первой в списке должна всегда быть группа для пользователей с полномочиями администраторов КВГ
    groups: [administrators, users]

    # Имя администратора
    kvg_admin_name: kvg_admin

    # Сервисы
    services_list: [krb5-kdc, krb5-admin-server, slapd, nslcd, nscd, aldd, aldcd]

# точка монтирования glusterfs
# todo сейчас используется в glusterfs role, будет монтироваться pacemaker'ом
gluster:
    mount_point: '/var/glusterfs'
    placedir: '/srv'
    volume: 'vm_storage_volume'
dirs:
    vm_images: '{{ gluster.mount_point }}/vm_images_and_config'
    ald_env_users: '{{ gluster.mount_point }}'

